# 重复标签页清理器 v4.2.0 发布说明

## 📦 发布包内容

本发布包包含以下文件：
- `重复标签页清理器-v4.2.0.zip` - ZIP格式压缩包（推荐）
- `重复标签页清理器-v4.2.0.tar.gz` - TAR.GZ格式压缩包

## 🚀 安装方法

### 方法一：直接安装（推荐）
1. 下载 `重复标签页清理器-v4.2.0.zip`
2. 解压到任意文件夹
3. 打开Chrome浏览器，访问 `chrome://extensions/`
4. 开启右上角的"开发者模式"
5. 点击"加载已解压的扩展程序"
6. 选择解压后的 `chrome-duplicate-window-cleaner` 文件夹
7. 安装完成！

### 方法二：从源码安装
1. 克隆GitHub仓库：`git clone https://github.com/xieweixiewei/clear.git`
2. 进入 `chrome-duplicate-window-cleaner` 目录
3. 按照方法一的步骤3-7进行安装

## ✨ 功能特点

- ✅ **智能重复检测** - 自动识别相同URL的标签页
- ✅ **保护音频标签页** - 不会关闭正在播放音频的标签页
- ✅ **保护固定标签页** - 不会关闭已固定的标签页
- ✅ **跳过系统页面** - 忽略Chrome内部页面
- ✅ **三重清理模式** - 支持清理当前窗口、所有窗口或旧标签页
- ✅ **清理旧标签页** - 自动清理长期未访问的标签页（1天未访问）
- ✅ **清理前确认** - 清理旧标签页前会显示数量并要求确认
- ✅ **实时统计** - 显示当前窗口标签页数量和重复数量
- ✅ **清理历史** - 显示上次清理的时间
- ✅ **简洁界面** - 美观的渐变色界面设计

## 🔄 版本更新

### v4.2.0 (2026-01-16) 🎉 新版本
#### 🆕 新增功能
- **清理旧标签页功能** - 自动清理1天未访问的标签页
- **清理前确认对话框** - 显示待清理标签页数量，避免误操作
- **上次清理时间显示** - 在弹出窗口显示上次清理的时间
- **标签页访问时间跟踪** - 后台自动记录每个标签页的最后访问时间
- **智能保护机制** - 保护固定标签页、音频标签页和系统页面

#### 🐛 重要修复
- **修复误删当天标签页的问题** - 扩展重新加载时会初始化所有现有标签页的访问时间
- **修复访问记录丢失问题** - 没有访问记录的标签页不会被清理（防止误删）
- **优化后台脚本** - 定期清理已关闭标签页的记录，避免内存泄漏

#### 🔧 技术改进
- 添加 `storage` 权限用于保存标签页访问时间和清理历史
- 实现完整的标签页生命周期跟踪（创建、激活、更新、关闭）
- 添加扩展安装时的初始化逻辑
- 优化数据存储结构和清理策略

### v4.1.0 (2026-01-13)
- **移除快捷键功能** - 解决与其他软件的快捷键冲突问题
- **简化架构** - 移除不必要的后台脚本逻辑
- **提高稳定性** - 优化扩展性能和可靠性
- **保留核心功能** - 所有标签页清理功能完全保留

### v4.0.x
- 实现基本的重复标签页清理功能
- 支持快捷键操作（已在v4.1.0中移除）

## 🎯 使用方法

### 清理重复标签页
1. 安装扩展后，浏览器工具栏会出现扩展图标
2. 点击图标打开弹出窗口
3. 查看当前窗口的标签页统计信息
4. 选择清理模式：
   - **清理当前窗口重复标签页** - 只清理当前窗口
   - **清理所有窗口重复标签页** - 清理所有浏览器窗口
5. 点击按钮执行清理
6. 查看清理结果

### 清理旧标签页 🆕
1. 点击扩展图标打开弹出窗口
2. 点击"清理旧标签页"按钮
3. 系统会扫描所有1天未访问的标签页
4. 显示确认对话框，告知待清理的标签页数量
5. 确认后执行清理，或取消操作
6. 查看清理结果和上次清理时间

## ⚠️ 注意事项

- 扩展需要"标签页"、"窗口"和"存储"权限才能正常工作
- 正在播放音频的标签页不会被关闭
- 固定的标签页不会被清理
- Chrome内部页面（chrome://）不会被处理
- 清理旧标签页时会显示确认对话框，避免误操作
- 扩展重新加载时会自动初始化所有现有标签页的访问时间
- 没有访问记录的标签页不会被清理（保护机制）

## 🛡️ 安全保护机制

v4.2.0 版本实施了多重保护机制，确保不会误删重要标签页：

1. **初始化保护** - 扩展安装或重新加载时，所有现有标签页的访问时间会被初始化为当前时间
2. **无记录保护** - 没有访问记录的标签页不会被清理
3. **固定标签页保护** - 已固定的标签页永远不会被清理
4. **音频标签页保护** - 正在播放音频的标签页不会被关闭
5. **系统页面保护** - Chrome内部页面不会被处理
6. **确认对话框** - 清理前会显示待清理数量并要求用户确认

## 🐛 问题反馈

如果遇到问题，请：
1. 访问GitHub仓库：https://github.com/xieweixiewei/clear.git
2. 提交Issue描述问题
3. 或联系开发者

## 📄 许可证

本项目采用开源许可证，详见GitHub仓库。

---

**开发者**: xieweixiewei  
**GitHub**: https://github.com/xieweixiewei/clear.git  
**版本**: v4.2.0  
**发布日期**: 2026年1月16日
